sequenceDiagram
    participant User as Пользователь Telegram
    participant Main as main.py (Бот)
    participant Handlers as Обработчики
    participant Utils as Утилиты
    participant Models as Модели
    participant Django as Django Приложение

    User->>Main: Отправляет сообщение/команду
    Main->>Handlers: Определяет тип сообщения
    alt Команда администратора
        Handlers->>Admin: Обработка admin.py
        Admin->>Models: Работа с данными
        Models-->>Admin: Возврат данных
        Admin-->>Main: Формирование ответа
    else Календарные события
        Handlers->>Calendar: Обработка calendar.py
        Calendar->>CalendarUtils: Использует calendar_utils.py
        CalendarUtils->>Database: Запросы к БД
        Database-->>CalendarUtils: Данные
        CalendarUtils-->>Calendar: Обработанные данные
        Calendar-->>Main: Формирование ответа
    else Обычные сообщения
        Handlers->>Common: Обработка common.py
        Common->>Models: Работа с данными
        Models-->>Common: Возврат данных
        Common-->>Main: Формирование ответа
    end

    Main->>User: Отправляет ответ

    Note right of Django: Асинхронное взаимодействие
    Main->>Django: API запрос (при необходимости)
    Django-->>Main: API ответ
